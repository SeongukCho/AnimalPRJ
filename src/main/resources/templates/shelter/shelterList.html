<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>동물보호센터</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script type="text/javascript" src="/js/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="/js/jquery-ui.js"></script>
    <script type="text/javascript" src="/js/menu.js"></script>

    <link rel="stylesheet" href="/css/table.css">
    <link rel="stylesheet" href="/css/fullpage.css">
    <link rel="stylesheet" href="/css/board.css">
    <link rel="stylesheet" href="/css/re.css">
    <link rel="stylesheet" href="/css/etc.css">
    <link rel="stylesheet" href="/css/font.css">
    <link rel="stylesheet" href="/css/carousel.css">
    <link rel="stylesheet" href="/css/responsive.css">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/ui_content.css">
    <link rel="stylesheet" href="/css/paging.css">
    <link rel="stylesheet" href="/css/animal.css">

    <script type="text/javascript">

        document.addEventListener("DOMContentLoaded", function () {
            let userId = '[[${userId}]]'; // 서버에서 전달된 사용자 ID
            let myPage = document.querySelectorAll(".myPage");

            myPage.forEach(function(link) {
                link.href = "/user/myPage/" + userId;
            });
        });

        //상세보기 이동
        function doDetail(seq) {
            location.href = "/animal/animalInfo?desertionNo=" + seq;
        }

        function removeBrackets(str) {
            return str.replace(/\[.*?\]\s*/, '');
        }

    </script>
</head>
<body>
<div id="wrapper">
    <!-- 내비게이션 바 -->
    <header id="header" class>
        <div class="head_box">
            <h1 class="logo"><a href="/main">펫밀리</a></h1>
            <button type="button" class="btnMenu"><span>메뉴</span></button>
            <!-- gnb -->
            <nav id="gnb">
                <ul class="gnb">
                    <li>
                        <a href="/animal/protectAnimal"><span>구조동물</span></a>
                        <ul>
                            <li><a href="/animal/protectAnimal">입양대기 동물</a></li>
                            <li><a href="/animal/noticeAnimal">반환대기 동물</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="/shelter/shelterList"><span>동물보호센터</span></a>
                        <ul>
                            <li><a href="/shelter/shelterList">동물보호센터</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="/board/boardList"><span>게시판</span></a>
                        <ul>
                            <li><a href="/board/boardList">게시판</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="/chat/intro"><span>고객센터</span></a>
                        <ul>
                            <li><a href="/chat/intro">문의하기</a></li>
                        </ul>
                    </li>
                </ul>
            </nav>
            <!-- //gnb -->
            <div class="topGlob" th:if="${session.SS_USER_ID == null}">
                <ul>
                    <li><a href="/user/userRegForm">회원가입</a></li>
                    <li><a href="/user/login">로그인</a></li>
                </ul>
            </div>
            <div class="topGlob" th:if="${session.SS_USER_ID != null}">
                <p th:text="'안녕하세요, ' + ${session.SS_USER_ID} + '님!'"></p>
                <a href="#" class="myPage">마이페이지</a>
                &nbsp;&nbsp;
                <a href="/user/logout">로그아웃</a>
            </div>
            <nav id="mGnb">
                <button type="button" class="btnClose"><span>닫기</span></button>
                <div class="mbTop" th:if="${session.SS_USER_ID == null}">
                    <div class="mlogo"><a href="/main"><img src="/img/logo.png"></a></div>
                    <ul>
                        <li><a href="/user/userRegForm">회원가입</a></li>
                        <li><a href="/user/login">로그인</a></li>
                    </ul>
                </div>
                <div class="mbTop" th:if="${session.SS_USER_ID != null}">
                    <div class="mlogo"><a href="/main"><img src="/img/logo.png"></a></div>
                    <ul>
                        <li><a href="#" class="myPage">마이 페이지</a></li>
                        <li><a href="/user/logout">로그아웃</a></li>
                    </ul>
                </div>
                <ul>
                    <li class="has-sub">
                        <a href="/animal/animalList">동물보호센터</a>
                        <ul>
                            <li><a href="/animal/animalList">동물보호센터</a>
                            </li>
                        </ul>
                    </li>
                    <li class="has-sub">
                        <a href="/board/boardList">게시판</a>
                        <ul>
                            <li><a href="/board/boardList">게시판</a>
                            </li>
                        </ul>
                    </li>
                    <li class="has-sub">
                        <a href="/chat/intro">고객센터</a>
                        <ul>
                            <li><a href="/chat/intro">문의하기</a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </nav>
            <div class="fix_bg"></div>
        </div>
    </header>
    <!-- // 내비게이션 바 -->
    <div id="subContainer" style="margin-left: 150px; margin-right: 150px;">
        <div class="subSkin bg"></div>
        <nav id="lnb">
            <div class="area_subVisual">
                <div class="inner">
                    <div class="lnb pc">
                        <div class="home">
                            <a href="/main"></a>
                        </div>
                        <ul>
                            <li>
                                <a href="/shelter/shelterList" title="동물보호센터">동물보호센터</a>
                            </li>
                        </ul>
                    </div>
                    <div class="lnb mobile">
                        <div class="home">
                            <a href="/main"></a>
                        </div>
                        <div class="large">동물보호센터</div>

                        <div class="small">
                            <span data-mobile-tit="">동물보호센터</span>
                            <ul>
                                <li>
                                    <a href="/shelter/shelterList" title="동물보호센터">동물보호센터</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </nav>
        <br>
        <div class="flex flex-1 flex-col gap-2 undefined">
            <div class="openAnimation w-full h-full flex items-center justify-center">
                <div class="grid grid-cols-2 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-y-3 gap-x-3">
                    <div th:each="shelter : ${rList}" class="col-lg-3 col-md-4 col-sm-6 col-12 d-flex">
                        <div class="bg-white dark:bg-stone-900 border border-gray-200 rounded-lg shadow-md dark:bg-gray-800 dark:border-gray-700">
                            <div class="h-full flex flex-col gap-2 p-2 sm:p-5">
                                <div>
                                    <div class="flex items-center justify-between flex-wrap gap-2">
                                        <a th:href="'/shelter/shelterInfo/' + ${shelter.id}">
                                            <h5 class="text-xl font-bold tracking-tight text-gray-900 dark:text-white" th:text="${shelter.careNm}">Shelter Name</h5>
                                        </a>
                                        <span class="text-xs text-gray-400" th:text="${shelter.divisionNm}">Organization Type</span>
                                    </div>
                                </div>
                                <div class="flex items-center gap-2 font-normal text-sm text-gray-700 dark:text-stone-400">
                                    <svg class="h-4 min-w-[16px] fill-gray-700 dark:fill-stone-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512">
                                        <path d="M215.7 499.2C267 435 384 279.4 384 192C384 86 298 0 192 0S0 86 0 192c0 87.4 117 243 168.3 307.2c12.3 15.3 35.1 15.3 47.4 0zM192 256c-35.3 0-64-28.7-64-64s28.7-64 64-64s64 28.7 64 64s-28.7 64-64 64z"></path>
                                    </svg>
                                    <div class="overflow-hidden text-ellipsis whitespace-nowrap" th:text="${shelter.careAddr}">Address</div>
                                </div>
                                <div class="flex items-center gap-2 font-normal text-sm text-gray-700 dark:text-stone-400">
                                    <svg class="h-4 min-w-[16px] fill-gray-700 dark:fill-stone-400" viewBox="0 0 512 512">
                                        <path d="M164.9 24.6c-7.7-18.6-28-28.5-47.4-23.2l-88 24C12.1 30.2 0 46 0 64C0 311.4 200.6 512 448 512c18 0 33.8-12.1 38.6-29.5l24-88c5.3-19.4-4.6-39.7-23.2-47.4l-96-40c-16.3-6.8-35.2-2.1-46.3 11.6L304.7 368C234.3 334.7 177.3 277.7 144 207.3L193.3 167c13.7-11.2 18.4-30 11.6-46.3l-40-96z"></path>
                                    </svg>
                                    <div class="overflow-hidden text-ellipsis whitespace-nowrap" th:text="${shelter.careTel}">Telephone</div>
                                </div>
                                <div class="flex-1 border-solid border-b border-gray-300"></div>
                                <div class="flex flex-wrap gap-1">
                                    <span class="px-2 py-1 rounded text-white bg-sky-500 font-semibold text-xs flex align-center w-max cursor-pointer active:bg-gray-300 transition duration-300 ease" th:text="'운영시간 ' + ${shelter.weekOprStime} + ' ~ ' + ${shelter.weekOprEtime}">운영시간</span>
                                    <span class="px-2 py-1 rounded text-white bg-pink-500 font-semibold text-xs flex align-center w-max cursor-pointer active:bg-gray-300 transition duration-300 ease" th:text="${shelter.closeDay}">Close Day</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- 페이징 네비게이션 -->
        <div class="flex justify-center py-10">
            <div class="pagination">
                <ul>
                    <!-- First page link -->
                    <li th:if="${currentPage > 1}">
                        <a th:href="@{/shelter/shelterList(page=1, size=${size})}">처음</a>
                    </li>

                    <!-- Previous page link -->
                    <li th:if="${currentPage > 1}">
                        <a th:href="@{/shelter/shelterList(page=${currentPage - 1}, size=${size})}">이전</a>
                    </li>

                    <!-- Page number links -->
                    <li th:each="i : ${#numbers.sequence(startPage, endPage)}">
                        <a th:href="@{/shelter/shelterList(page=${i}, size=${size})}"
                           th:classappend="${i} == ${currentPage} ? 'active' : ''"
                           th:text="${i}"></a>
                    </li>

                    <!-- Next page link -->
                    <li th:if="${currentPage < totalPages}">
                        <a th:href="@{/shelter/shelterList(page=${currentPage + 1}, size=${size})}">다음</a>
                    </li>

                    <!-- Last page link -->
                    <li th:if="${currentPage < totalPages}">
                        <a th:href="@{/shelter/shelterList(page=${totalPages}, size=${size})}">마지막</a>
                    </li>
                </ul>
            </div>
        </div>
        <!--페이징 네비게이션 -->
    </div>
</div>
</body>
</html>